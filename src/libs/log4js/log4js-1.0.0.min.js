/*! log4js 25-05-2015 */
var Log4js={version:"1.0.0",applicationStartDate:new Date,loggers:{},getLogger:function(a){return"string"!=typeof a&&(a="[default]"),Log4js.loggers[a]||(Log4js.loggers[a]=new Log4js.Logger(a)),Log4js.loggers[a]},getDefaultLogger:function(){return Log4js.getLogger("[default]")},attachEvent:function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c)}};Log4js.extend=function(a,b){for(var c in b)a[c]=b[c];return a},Log4js.bind=function(a,b){return function(){return a.apply(b,arguments)}},Array.prototype.push||(Array.prototype.push=function(){for(var a=this.length,b=0;b<arguments.length;b++)this[a+b]=arguments[b];return this.length}),Log4js.Level=function(a,b){this.level=a,this.levelStr=b},Log4js.Level.prototype={toLevel:function(a,b){if(null===a)return b;if("string"==typeof a){var c=a.toUpperCase();switch(c){case"ALL":return Log4js.Level.ALL;case"DEBUG":return Log4js.Level.DEBUG;case"INFO":return Log4js.Level.INFO;case"WARN":return Log4js.Level.WARN;case"ERROR":return Log4js.Level.ERROR;case"FATAL":return Log4js.Level.FATAL;case"OFF":return Log4js.Level.OFF;case"TRACE":return Log4js.Level.TRACE;default:return b}}else{if("number"!=typeof a)return b;switch(a){case ALL_INT:return Log4js.Level.ALL;case DEBUG_INT:return Log4js.Level.DEBUG;case INFO_INT:return Log4js.Level.INFO;case WARN_INT:return Log4js.Level.WARN;case ERROR_INT:return Log4js.Level.ERROR;case FATAL_INT:return Log4js.Level.FATAL;case OFF_INT:return Log4js.Level.OFF;case TRACE_INT:return Log4js.Level.TRACE;default:return b}}},toString:function(){return this.levelStr},valueOf:function(){return this.level}},Log4js.Level.OFF_INT=Number.MAX_VALUE,Log4js.Level.FATAL_INT=5e4,Log4js.Level.ERROR_INT=4e4,Log4js.Level.WARN_INT=3e4,Log4js.Level.INFO_INT=2e4,Log4js.Level.DEBUG_INT=1e4,Log4js.Level.TRACE_INT=5e3,Log4js.Level.ALL_INT=Number.MIN_VALUE,Log4js.Level.OFF=new Log4js.Level(Log4js.Level.OFF_INT,"OFF"),Log4js.Level.FATAL=new Log4js.Level(Log4js.Level.FATAL_INT,"FATAL"),Log4js.Level.ERROR=new Log4js.Level(Log4js.Level.ERROR_INT,"ERROR"),Log4js.Level.WARN=new Log4js.Level(Log4js.Level.WARN_INT,"WARN"),Log4js.Level.INFO=new Log4js.Level(Log4js.Level.INFO_INT,"INFO"),Log4js.Level.DEBUG=new Log4js.Level(Log4js.Level.DEBUG_INT,"DEBUG"),Log4js.Level.TRACE=new Log4js.Level(Log4js.Level.TRACE_INT,"TRACE"),Log4js.Level.ALL=new Log4js.Level(Log4js.Level.ALL_INT,"ALL"),Log4js.Logger=function(a){this.loggingEvents=[],this.appenders=[],this.category=a||"",this.level=Log4js.Level.FATAL,this.dateformat=Log4js.DateFormatter.DEFAULT_DATE_FORMAT,this.dateformatter=new Log4js.DateFormatter,this.onlog=new Log4js.CustomEvent,this.onclear=new Log4js.CustomEvent,this.appenders.push(new Log4js.Appender(this));try{window.onerror=this.windowError.bind(this)}catch(b){}},Log4js.Logger.prototype={addAppender:function(a){if(!(a instanceof Log4js.Appender))throw"Not instance of an Appender: "+a;a.setLogger(this),this.appenders.push(a)},setAppenders:function(a){for(var b=0;b<this.appenders.length;b++)this.appenders[b].doClear();this.appenders=a;for(var c=0;c<this.appenders.length;c++)this.appenders[c].setLogger(this)},setLevel:function(a){this.level=a},log:function(a,b,c){var d=new Log4js.LoggingEvent(this.category,a,b,c,this);this.loggingEvents.push(d),this.onlog.dispatch(d)},clear:function(){try{this.loggingEvents=[],this.onclear.dispatch()}catch(a){}},isTraceEnabled:function(){return this.level.valueOf()<=Log4js.Level.TRACE.valueOf()?!0:!1},trace:function(a){this.isTraceEnabled()&&this.log(Log4js.Level.TRACE,a,null)},isDebugEnabled:function(){return this.level.valueOf()<=Log4js.Level.DEBUG.valueOf()?!0:!1},debug:function(a,b){this.isDebugEnabled()&&this.log(Log4js.Level.DEBUG,a,b)},isInfoEnabled:function(){return this.level.valueOf()<=Log4js.Level.INFO.valueOf()?!0:!1},info:function(a,b){this.isInfoEnabled()&&this.log(Log4js.Level.INFO,a,b)},isWarnEnabled:function(){return this.level.valueOf()<=Log4js.Level.WARN.valueOf()?!0:!1},warn:function(a,b){this.isWarnEnabled()&&this.log(Log4js.Level.WARN,a,b)},isErrorEnabled:function(){return this.level.valueOf()<=Log4js.Level.ERROR.valueOf()?!0:!1},error:function(a,b){this.isErrorEnabled()&&this.log(Log4js.Level.ERROR,a,b)},isFatalEnabled:function(){return this.level.valueOf()<=Log4js.Level.FATAL.valueOf()?!0:!1},fatal:function(a,b){this.isFatalEnabled()&&this.log(Log4js.Level.FATAL,a,b)},windowError:function(a,b,c){var d="Error in ("+(b||window.location)+") on line "+c+" with message ("+a+")";this.log(Log4js.Level.FATAL,d,null)},setDateFormat:function(a){this.dateformat=a},getFormattedTimestamp:function(a){return this.dateformatter.formatDate(a,this.dateformat)}},Log4js.CustomEvent=function(){this.listeners=[]},Log4js.CustomEvent.prototype={addListener:function(a){this.listeners.push(a)},removeListener:function(a){for(var b=this.findListenerIndexes(a),c=0;c<b.length;c++)this.listeners.splice(b[c],1)},dispatch:function(a){for(var b=0;b<this.listeners.length;b++)try{this.listeners[b](a)}catch(c){log4jsLogger&&log4jsLogger.warn("Could not run the listener "+this.listeners[b]+". \n"+c)}},findListenerIndexes:function(a){for(var b=[],c=0;c<this.listeners.length;c++)this.listeners[c]==a&&b.push(c);return b}},Log4js.LoggingEvent=function(a,b,c,d,e){this.startTime=new Date,this.categoryName=a,this.message=c,this.exception=d,this.level=b,this.logger=e},Log4js.LoggingEvent.prototype={getFormattedTimestamp:function(){return this.logger?this.logger.getFormattedTimestamp(this.startTime):this.startTime.toGMTString()}},Log4js.Appender=function(){this.logger=null},Log4js.Appender.prototype={doAppend:function(a){},doClear:function(){},setLayout:function(a){this.layout=a},setLogger:function(a){a.onlog.addListener(Log4js.bind(this.doAppend,this)),a.onclear.addListener(Log4js.bind(this.doClear,this)),this.logger=a}},Log4js.AjaxAppender=function(a){this.isInProgress=!1,this.loggingUrl=a||"logging.log4js",this.threshold=1,this.timeout=2e3,this.loggingEventMap=new Log4js.FifoBuffer,this.layout=new Log4js.XMLLayout,this.httpRequest=null},Log4js.AjaxAppender.prototype=Log4js.extend(new Log4js.Appender,{doAppend:function(a){log4jsLogger&&log4jsLogger.trace("> AjaxAppender.append"),(this.loggingEventMap.length()<=this.threshold||this.isInProgress===!0)&&this.loggingEventMap.push(a),this.loggingEventMap.length()>=this.threshold&&this.isInProgress===!1&&this.send(),log4jsLogger&&log4jsLogger.trace("< AjaxAppender.append")},doClear:function(){log4jsLogger&&log4jsLogger.trace("> AjaxAppender.doClear"),this.loggingEventMap.length()>0&&this.send(),log4jsLogger&&log4jsLogger.trace("< AjaxAppender.doClear")},setThreshold:function(a){log4jsLogger&&log4jsLogger.trace("> AjaxAppender.setThreshold: "+a),this.threshold=a,log4jsLogger&&log4jsLogger.trace("< AjaxAppender.setThreshold")},setTimeout:function(a){this.timeout=a},send:function(){if(this.loggingEventMap.length()>0){log4jsLogger&&log4jsLogger.trace("> AjaxAppender.send"),this.isInProgress=!0;for(var a=[],b=0;b<this.loggingEventMap.length()&&b<this.threshold;b++)a.push(this.layout.format(this.loggingEventMap.pull()));var c=this.layout.getHeader();c+=a.join(this.layout.getSeparator()),c+=this.layout.getFooter();var d=this;null===this.httpRequest&&(this.httpRequest=this.getXmlHttpRequest()),this.httpRequest.onreadystatechange=function(){d.onReadyStateChanged.call(d)},this.httpRequest.open("POST",this.loggingUrl,!0),this.httpRequest.setRequestHeader("Content-type",this.layout.getContentType()),this.httpRequest.setRequestHeader("REFERER",location.href),this.httpRequest.setRequestHeader("Content-length",c.length),this.httpRequest.setRequestHeader("Connection","close"),this.httpRequest.send(c),d=this;try{window.setTimeout(function(){log4jsLogger&&log4jsLogger.trace("> AjaxAppender.timeout"),d.httpRequest.onreadystatechange=function(){},d.httpRequest.abort(),d.isInProgress=!1,d.loggingEventMap.length()>0&&d.send(),log4jsLogger&&log4jsLogger.trace("< AjaxAppender.timeout")},this.timeout)}catch(e){log4jsLogger&&log4jsLogger.fatal(e)}log4jsLogger&&log4jsLogger.trace("> AjaxAppender.send")}},onReadyStateChanged:function(){log4jsLogger&&log4jsLogger.trace("> AjaxAppender.onReadyStateChanged");var a=this.httpRequest;if(4!=this.httpRequest.readyState)return void(log4jsLogger&&log4jsLogger.trace("< AjaxAppender.onReadyStateChanged: readyState "+a.readyState+" != 4"));var b="undefined"==typeof a.status||0===a.status||a.status>=200&&a.status<300;if(b)log4jsLogger&&log4jsLogger.trace("  AjaxAppender.onReadyStateChanged: success"),this.isInProgress=!1;else{var c="  AjaxAppender.onReadyStateChanged: XMLHttpRequest request to URL "+this.loggingUrl+" returned status code "+this.httpRequest.status;log4jsLogger&&log4jsLogger.error(c)}log4jsLogger&&log4jsLogger.trace("< AjaxAppender.onReadyStateChanged: readyState == 4")},getXmlHttpRequest:function(){log4jsLogger&&log4jsLogger.trace("> AjaxAppender.getXmlHttpRequest");var a=!1;try{if(window.XMLHttpRequest)a=new XMLHttpRequest,a.overrideMimeType&&a.overrideMimeType(this.layout.getContentType());else if(window.ActiveXObject)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){a=new ActiveXObject("Microsoft.XMLHTTP")}}catch(b){a=!1}return a||log4jsLogger&&log4jsLogger.fatal("Unfortunately, your browser does not support AjaxAppender for log4js!"),log4jsLogger&&log4jsLogger.trace("< AjaxAppender.getXmlHttpRequest"),a},toString:function(){return"Log4js.AjaxAppender[loggingUrl="+this.loggingUrl+", threshold="+this.threshold+"]"}}),Log4js.MozillaJSConsoleAppender=function(){this.layout=new Log4js.SimpleLayout;try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),this.jsConsole=Components.classes["@mozilla.org/consoleservice;1"].getService(Components.interfaces.nsIConsoleService),this.scriptError=Components.classes["@mozilla.org/scripterror;1"].createInstance(Components.interfaces.nsIScriptError)}catch(a){log4jsLogger&&log4jsLogger.error(a)}},Log4js.MozillaJSConsoleAppender.prototype=Log4js.extend(new Log4js.Appender,{doAppend:function(a){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),this.scriptError.init(this.layout.format(a),null,null,null,null,this.getFlag(a),a.categoryName),this.jsConsole.logMessage(this.scriptError)}catch(b){log4jsLogger&&log4jsLogger.error(b)}},toString:function(){return"Log4js.MozillaJSConsoleAppender"},getFlag:function(a){var b;switch(a.level){case Log4js.Level.FATAL:b=2;break;case Log4js.Level.ERROR:b=0;break;case Log4js.Level.WARN:b=1;break;default:b=1}return b}}),Log4js.OperaJSConsoleAppender=function(){this.layout=new Log4js.SimpleLayout},Log4js.OperaJSConsoleAppender.prototype=Log4js.extend(new Log4js.Appender,{doAppend:function(a){opera.postError(this.layout.format(a))},toString:function(){return"Log4js.OperaJSConsoleAppender"}}),Log4js.SafariJSConsoleAppender=function(){this.layout=new Log4js.SimpleLayout},Log4js.SafariJSConsoleAppender.prototype=Log4js.extend(new Log4js.Appender,{doAppend:function(a){window.console.log(this.layout.format(a))},toString:function(){return"Log4js.SafariJSConsoleAppender"}}),Log4js.BrowserConsoleAppender=function(){this.consoleDelegate=null,window.console?this.consoleDelegate=new Log4js.SafariJSConsoleAppender:window.opera?this.consoleDelegate=new Log4js.OperaJSConsoleAppender:netscape?this.consoleDelegate=new Log4js.MozillaJSConsoleAppender:log4jsLogger&&log4jsLogger.error("Unsupported Browser")},Log4js.BrowserConsoleAppender.prototype=Log4js.extend(new Log4js.Appender,{doAppend:function(a){this.consoleDelegate.doAppend(a)},doClear:function(){this.consoleDelegate.doClear()},setLayout:function(a){this.consoleDelegate.setLayout(a)},toString:function(){return"Log4js.BrowserConsoleAppender: "+this.consoleDelegate.toString()}}),Log4js.ConsoleAppender=function(a){this.layout=new Log4js.PatternLayout(Log4js.PatternLayout.TTCC_CONVERSION_PATTERN),this.inline=a,this.accesskey="d",this.tagPattern=null,this.commandHistory=[],this.commandIndex=0,this.popupBlocker=!1,this.outputElement=null,this.docReference=null,this.winReference=null,this.inline&&Log4js.attachEvent(window,"load",Log4js.bind(this.initialize,this))},Log4js.ConsoleAppender.prototype=Log4js.extend(new Log4js.Appender,{setAccessKey:function(a){this.accesskey=a},initialize:function(){if(this.inline)this.docReference=document,this.winReference=window;else{var a=this.makeWinName(this.logger.category);window.top.consoleWindow=window.open("",a,"left=0,top=0,width=700,height=700,scrollbars=no,status=no,resizable=yes;toolbar=no"),window.top.consoleWindow.opener=self;var b=window.top.consoleWindow;if(b){var c=b.document;c.open(),c.write("<!DOCTYPE html PUBLIC -//W3C//DTD XHTML 1.0 Transitional//EN "),c.write("  http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd>\n\n"),c.write("<html><head><title>Log4js - "+this.logger.category+"</title>\n"),c.write('</head><body style="background-color:darkgray"></body>\n'),b.blur(),b.focus()}else this.popupBlocker=!0,alert("Popup window manager blocking the Log4js popup window to bedisplayed.\n\nPlease disabled this to properly see logged events.");this.docReference=c,this.winReference=b}if(this.outputCount=0,this.tagPattern=".*",this.logElement=this.docReference.createElement("div"),this.docReference.body.appendChild(this.logElement),this.logElement.style.display="none",this.logElement.style.position="absolute",this.logElement.style.left="0px",this.logElement.style.width="100%",this.logElement.style.textAlign="left",this.logElement.style.fontFamily="lucida console",this.logElement.style.fontSize="100%",this.logElement.style.backgroundColor="darkgray",this.logElement.style.opacity=.9,this.logElement.style.zIndex=2e3,this.toolbarElement=this.docReference.createElement("div"),this.logElement.appendChild(this.toolbarElement),this.toolbarElement.style.padding="0 0 0 2px",this.buttonsContainerElement=this.docReference.createElement("span"),this.toolbarElement.appendChild(this.buttonsContainerElement),this.inline){var d=this.docReference.createElement("button");d.style.cssFloat="right",d.style.styleFloat="right",d.style.color="black",d.innerHTML="close",d.onclick=Log4js.bind(this.toggle,this),this.buttonsContainerElement.appendChild(d)}var e=this.docReference.createElement("button");if(e.style.cssFloat="right",e.style.styleFloat="right",e.style.color="black",e.innerHTML="clear",e.onclick=Log4js.bind(this.logger.clear,this.logger),this.buttonsContainerElement.appendChild(e),this.tagFilterContainerElement=this.docReference.createElement("span"),this.toolbarElement.appendChild(this.tagFilterContainerElement),this.tagFilterContainerElement.style.cssFloat="left",this.tagFilterContainerElement.appendChild(this.docReference.createTextNode("Log4js - "+this.logger.category)),this.tagFilterContainerElement.appendChild(this.docReference.createTextNode(" | Level Filter: ")),this.tagFilterElement=this.docReference.createElement("input"),this.tagFilterContainerElement.appendChild(this.tagFilterElement),this.tagFilterElement.style.width="200px",this.tagFilterElement.value=this.tagPattern,this.tagFilterElement.setAttribute("autocomplete","off"),Log4js.attachEvent(this.tagFilterElement,"keyup",Log4js.bind(this.updateTags,this)),Log4js.attachEvent(this.tagFilterElement,"click",Log4js.bind(function(){this.tagFilterElement.select()},this)),this.outputElement=this.docReference.createElement("div"),this.logElement.appendChild(this.outputElement),this.outputElement.style.overflow="auto",this.outputElement.style.clear="both",this.outputElement.style.height=this.inline?"200px":"650px",this.outputElement.style.width="100%",this.outputElement.style.backgroundColor="black",this.inputContainerElement=this.docReference.createElement("div"),this.inputContainerElement.style.width="100%",this.logElement.appendChild(this.inputContainerElement),this.inputElement=this.docReference.createElement("input"),this.inputContainerElement.appendChild(this.inputElement),this.inputElement.style.width="100%",this.inputElement.style.borderWidth="0px",this.inputElement.style.margin="0px",this.inputElement.style.padding="0px",this.inputElement.value="Type command here",this.inputElement.setAttribute("autocomplete","off"),Log4js.attachEvent(this.inputElement,"keyup",Log4js.bind(this.handleInput,this)),Log4js.attachEvent(this.inputElement,"click",Log4js.bind(function(){this.inputElement.select()},this)),this.inline){window.setInterval(Log4js.bind(this.repositionWindow,this),500),this.repositionWindow();var f=this.docReference.createElement("button");f.style.position="absolute",f.style.top="-100px",f.accessKey=this.accesskey,f.onclick=Log4js.bind(this.toggle,this),this.docReference.body.appendChild(f)}else this.show()},toggle:function(){return"none"==this.logElement.style.display?(this.show(),!0):(this.hide(),!1)},show:function(){this.logElement.style.display="",this.outputElement.scrollTop=this.outputElement.scrollHeight,this.inputElement.select()},hide:function(){this.logElement.style.display="none"},output:function(a,b){var c=this.outputElement.scrollTop+2*this.outputElement.clientHeight>=this.outputElement.scrollHeight;this.outputCount++,b=b?b+=";":"",b+="padding:1px;margin:0 0 5px 0",this.outputCount%2===0&&(b+=";background-color:#101010"),a=a||"undefined",a=a.toString(),this.outputElement.innerHTML+="<pre style='"+b+"'>"+a+"</pre>",c&&(this.outputElement.scrollTop=this.outputElement.scrollHeight)},updateTags:function(){var a=this.tagFilterElement.value;if(this.tagPattern!=a){try{new RegExp(a)}catch(b){return}this.tagPattern=a,this.outputElement.innerHTML="",this.outputCount=0;for(var c=0;c<this.logger.loggingEvents.length;c++)this.doAppend(this.logger.loggingEvents[c])}},repositionWindow:function(){var a=window.pageYOffset||this.docReference.documentElement.scrollTop||this.docReference.body.scrollTop,b=self.innerHeight||this.docReference.documentElement.clientHeight||this.docReference.body.clientHeight;this.logElement.style.top=a+b-this.logElement.offsetHeight+"px"},doAppend:function(a){if(!this.popupBlocker&&(this.inline||this.winReference&&!this.winReference.closed||this.initialize(),null===this.tagPattern||-1!=a.level.toString().search(new RegExp(this.tagPattern,"igm")))){var b="";b+=-1!=a.level.toString().search(/ERROR/)?"color:red":-1!=a.level.toString().search(/FATAL/)?"color:red":-1!=a.level.toString().search(/WARN/)?"color:orange":-1!=a.level.toString().search(/DEBUG/)?"color:green":-1!=a.level.toString().search(/INFO/)?"color:white":"color:yellow",this.output(this.layout.format(a),b)}},doClear:function(){this.outputElement.innerHTML=""},handleInput:function(e){if(13==e.keyCode){var command=this.inputElement.value;switch(command){case"clear":this.logger.clear();break;default:var consoleOutput="";try{consoleOutput=eval(this.inputElement.value)}catch(e){this.logger.error("Problem parsing input <"+command+">"+e.message);break}this.logger.trace(consoleOutput)}""!==this.inputElement.value&&this.inputElement.value!==this.commandHistory[0]&&this.commandHistory.unshift(this.inputElement.value),this.commandIndex=0,this.inputElement.value=""}else 38==e.keyCode&&this.commandHistory.length>0?(this.inputElement.value=this.commandHistory[this.commandIndex],this.commandIndex<this.commandHistory.length-1&&(this.commandIndex+=1)):40==e.keyCode&&this.commandHistory.length>0?(this.commandIndex>0&&(this.commandIndex-=1),this.inputElement.value=this.commandHistory[this.commandIndex]):this.commandIndex=0},makeWinName:function(a){return a.replace(/[^\d\w]/g,"_")},toString:function(){return"Log4js.ConsoleAppender[inline="+this.inline+"]"}}),Log4js.FileAppender=function(a){this.layout=new Log4js.SimpleLayout,this.isIE="undefined",this.file=a||"log4js.log";try{this.fso=new ActiveXObject("Scripting.FileSystemObject"),this.isIE=!0}catch(b){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),this.fso=Components.classes["@mozilla.org/file/local;1"].createInstance(Components.interfaces.nsILocalFile),this.isIE=!1}catch(b){log4jsLogger&&log4jsLogger.error(b)}}},Log4js.FileAppender.prototype=Log4js.extend(new Log4js.Appender,{doAppend:function(a){try{var b=null;if("undefined"===this.isIE)log4jsLogger&&log4jsLogger.error("Unsupported");else if(this.isIE)b=this.fso.OpenTextFile(this.file,8,!0),b.WriteLine(this.layout.format(a)),b.close();else{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),this.fso.initWithPath(this.file),this.fso.exists()||this.fso.create(0,384),b=Components.classes["@mozilla.org/network/file-output-stream;1"].createInstance(Components.interfaces.nsIFileOutputStream),b.init(this.fso,28,52,0);var c=this.layout.format(a);b.write(c,c.length),b.close()}}catch(d){log4jsLogger&&log4jsLogger.error(d)}},doClear:function(){try{if(this.isIE){var a=this.fso.GetFile(this.file);a.Delete()}else netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect"),this.fso.initWithPath(this.file),this.fso.exists()&&this.fso.remove(!1)}catch(b){log4jsLogger&&log4jsLogger.error(b)}},toString:function(){return"Log4js.FileAppender[file="+this.file+"]"}}),Log4js.JSAlertAppender=function(){this.layout=new Log4js.SimpleLayout},Log4js.JSAlertAppender.prototype=Log4js.extend(new Log4js.Appender,{doAppend:function(a){alert(this.layout.getHeader()+this.layout.format(a)+this.layout.getFooter())},toString:function(){return"Log4js.JSAlertAppender"}}),Log4js.MetatagAppender=function(){this.currentLine=0},Log4js.MetatagAppender.prototype=Log4js.extend(new Log4js.Appender,{doAppend:function(a){for(var b=(new Date,a.message.split("\n")),c=document.getElementsByTagName("head")[0],d=1;d<=b.length;d++){var e=b[d-1];e=1==d?a.level.toString()+": "+e:"> "+e;var f=document.createElement("meta");f.setAttribute("name","X-log4js:"+this.currentLine),f.setAttribute("content",e),c.appendChild(f),this.currentLine+=1}},toString:function(){return"Log4js.MetatagAppender"}}),Log4js.WindowsEventAppender=function(){this.layout=new Log4js.SimpleLayout;try{this.shell=new ActiveXObject("WScript.Shell")}catch(a){log4jsLogger&&log4jsLogger.error(a)}},Log4js.WindowsEventAppender.prototype=Log4js.extend(new Log4js.Appender,{doAppend:function(a){var b=4;switch(a.level){case Log4js.Level.FATAL:b=1;break;case Log4js.Level.ERROR:b=1;break;case Log4js.Level.WARN:b=2;break;default:b=4}try{this.shell.LogEvent(b,this.level.format(a))}catch(c){log4jsLogger&&log4jsLogger.error(c)}},toString:function(){return"Log4js.WindowsEventAppender"}}),Log4js.Layout=function(){},Log4js.Layout.prototype={format:function(a){return""},getContentType:function(){return"text/plain"},getHeader:function(){return null},getFooter:function(){return null},getSeparator:function(){return""}},Log4js.BasicLayout=function(){this.LINE_SEP="\n"},Log4js.BasicLayout.prototype=Log4js.extend(new Log4js.Layout,{format:function(a){return a.categoryName+"~"+a.startTime.toLocaleString()+" ["+a.level.toString()+"] "+a.message+this.LINE_SEP},getContentType:function(){return"text/plain"},getHeader:function(){return""},getFooter:function(){return""}}),Log4js.HtmlLayout=function(){},Log4js.HtmlLayout.prototype=Log4js.extend(new Log4js.Layout,{format:function(a){return'<div style="'+this.getStyle(a)+'">'+a.getFormattedTimestamp()+" - "+a.level.toString()+" - "+a.message+"</div>\n"},getContentType:function(){return"text/html"},getHeader:function(){return"<html><head><title>log4js</head><body>"},getFooter:function(){return"</body></html>"},getStyle:function(a){var b;return b=-1!=a.level.toString().search(/ERROR/)?"color:red":-1!=a.level.toString().search(/FATAL/)?"color:red":-1!=a.level.toString().search(/WARN/)?"color:orange":-1!=a.level.toString().search(/DEBUG/)?"color:green":-1!=a.level.toString().search(/INFO/)?"color:white":"color:yellow"}}),Log4js.JSONLayout=function(){this.df=new Log4js.DateFormatter},Log4js.JSONLayout.prototype=Log4js.extend(new Log4js.Layout,{format:function(a){var b="unknown";try{b=navigator.userAgent}catch(c){b="unknown"}var d="unknown";try{d=location.href}catch(c){d="unknown"}var e='{\n "LoggingEvent": {\n';return e+='	"logger": "'+a.categoryName+'",\n',e+='	"level": "'+a.level.toString()+'",\n',e+=this.formatMessage(a.message),e+='	"referer": "'+d+'",\n',e+='	"useragent": "'+b+'",\n',e+='	"timestamp": "'+this.df.formatUTCDate(a.startTime,"yyyy-MM-ddThh:mm:ssZ")+'",\n',e+='	"exception": "'+a.exception+'"\n',e+="}}"},formatMessage:function(a){var b="";if("string"==typeof a)b+='	"message": "'+a+'",\n';else if("object"==typeof a){"message"in a&&(b+='	"message": "'+a.message+'",\n');for(var c in a)if("message"!=c){var d=a[c];if(d instanceof Date)b+='	"'+c+'_dt": "'+this.df.formatUTCDate(d,"yyyy-MM-ddThh:mm:ssZ")+'",\n';else switch(typeof d){case"string":b+='	"'+c+'_s": "'+d+'",\n';break;case"number":b+='	"'+c+'_l": '+d+",\n";break;default:b+='	"'+c+'_s": "'+d.toString()+'",\n'}}}else b+='	"message": "'+a.toString()+'",\n';return b},getContentType:function(){return"text/json"},getHeader:function(){return'{"Log4js": [\n'},getFooter:function(){return"\n]}"},getSeparator:function(){return",\n"}}),Log4js.PatternLayout=function(a){a?this.pattern=a:this.pattern=Log4js.PatternLayout.DEFAULT_CONVERSION_PATTERN},Log4js.PatternLayout.TTCC_CONVERSION_PATTERN="%r %p %c - %m%n",Log4js.PatternLayout.DEFAULT_CONVERSION_PATTERN="%m%n",Log4js.PatternLayout.ISO8601_DATEFORMAT="yyyy-MM-dd HH:mm:ss,SSS",Log4js.PatternLayout.DATETIME_DATEFORMAT="dd MMM YYYY HH:mm:ss,SSS",Log4js.PatternLayout.ABSOLUTETIME_DATEFORMAT="HH:mm:ss,SSS",Log4js.PatternLayout.prototype=Log4js.extend(new Log4js.Layout,{getContentType:function(){return"text/plain"},getHeader:function(){return null},getFooter:function(){return null},format:function(a){for(var b,c=/%(-?[0-9]+)?(\.?[0-9]+)?([cdmnpr%])(\{([^\}]+)\})?|([^%]+)/,d="",e=this.pattern;b=c.exec(e);){var f=b[0],g=b[1],h=b[2],i=b[3],j=b[5],k=b[6];if(k)d+=""+k;else{var l="";switch(i){case"c":var m=a.categoryName;if(j){var n=parseInt(j,10),o=a.categoryName.split(".");l=n>=o.length?m:o.slice(o.length-n).join(".")}else l=m;break;case"d":var p=Log4js.PatternLayout.ISO8601_DATEFORMAT;j&&(p=j,"ISO8601"==p?p=Log4js.PatternLayout.ISO8601_DATEFORMAT:"ABSOLUTE"==p?p=Log4js.PatternLayout.ABSOLUTETIME_DATEFORMAT:"DATE"==p&&(p=Log4js.PatternLayout.DATETIME_DATEFORMAT)),l=new Log4js.SimpleDateFormat(p).format(a.startTime);break;case"m":l=a.message;break;case"n":l="\n";break;case"p":l=a.level.toString();break;case"r":l=""+a.startTime.toLocaleTimeString();break;case"%":l="%";break;default:l=f}var q;if(h&&(q=parseInt(h.substr(1),10),l=l.substring(0,q)),g)if("-"==g.charAt(0))for(q=parseInt(g.substr(1),10);l.length<q;)l+=" ";else for(q=parseInt(g,10);l.length<q;)l=" "+l;d+=l}e=e.substr(b.index+b[0].length)}return d}}),Log4js.SimpleLayout=function(){this.LINE_SEP="\n",this.LINE_SEP_LEN=1},Log4js.SimpleLayout.prototype=Log4js.extend(new Log4js.Layout,{format:function(a){return a.level.toString()+" - "+a.message+this.LINE_SEP},getContentType:function(){return"text/plain"},getHeader:function(){return""},getFooter:function(){return""}}),Log4js.XMLLayout=function(){},Log4js.XMLLayout.prototype=Log4js.extend(new Log4js.Layout,{format:function(a){var b="unknown";try{b=navigator.userAgent}catch(c){b="unknown"}var d="unknown";try{d=location.href}catch(c){d="unknown"}var e='<log4js:event logger="';return e+=a.categoryName+'" level="',e+=a.level.toString()+'" useragent="',e+=b+'" referer="',e+=d.replace(/&/g,"&amp;")+'" timestamp="',e+=a.getFormattedTimestamp()+'">\n',e+="	<log4js:message><![CDATA["+this.escapeCdata(a.message)+"]]></log4js:message>\n",a.exception&&(e+=this.formatException(a.exception)),e+="</log4js:event>\n"},getContentType:function(){return"text/xml"},getHeader:function(){return'<log4js:eventSet version="'+Log4js.version+'" xmlns:log4js="http://stritti.github.io/log4js//2007/log4js/">\n'},getFooter:function(){return"</log4js:eventSet>\n"},getSeparator:function(){return"\n"},formatException:function(a){if(a){var b="	<log4js:throwable>";return a.message&&(b+="		<log4js:message><![CDATA["+this.escapeCdata(a.message)+"]]></log4js:message>\n"),a.description&&(b+="		<log4js:description><![CDATA["+this.escapeCdata(a.description)+"]]></log4js:description>\n"),b+="		<log4js:stacktrace>",b+='			<log4js:location fileName="'+a.fileName+'" lineNumber="'+a.lineNumber+'" />',b+="		</log4js:stacktrace>",b="	</log4js:throwable>"}return null},escapeCdata:function(a){return a.replace(/\]\]>/,"]]>]]&gt;<![CDATA[")}}),Log4js.DateFormatter=function(){},Log4js.DateFormatter.DEFAULT_DATE_FORMAT="yyyy-MM-ddThh:mm:ssO",Log4js.DateFormatter.prototype={formatDate:function(a,b){var c=this.addZero(a.getDate()),d=this.addZero(a.getMonth()+1),e=this.addZero(a.getFullYear()),f=this.addZero(a.getFullYear().toString().substring(3,4)),g=b.indexOf("yyyy")>-1?e:f,h=this.addZero(a.getHours()),i=this.addZero(a.getMinutes()),j=this.addZero(a.getSeconds()),k=this.O(a),l=b.replace(/dd/g,c).replace(/MM/g,d).replace(/y{1,4}/g,g);return l=l.replace(/hh/g,h).replace(/mm/g,i).replace(/ss/g,j),l=l.replace(/O/g,k)},formatUTCDate:function(a,b){var c=this.addZero(a.getUTCDate()),d=this.addZero(a.getUTCMonth()+1),e=this.addZero(a.getUTCFullYear()),f=this.addZero(a.getUTCFullYear().toString().substring(3,4)),g=b.indexOf("yyyy")>-1?e:f,h=this.addZero(a.getUTCHours()),i=this.addZero(a.getUTCMinutes()),j=this.addZero(a.getUTCSeconds()),k=b.replace(/dd/g,c).replace(/MM/g,d).replace(/y{1,4}/g,g);return k=k.replace(/hh/g,h).replace(/mm/g,i).replace(/ss/g,j)},addZero:function(a){return(10>a?"0":"")+a},O:function(a){var b=Math.abs(a.getTimezoneOffset()),c=String(Math.floor(b/60)),d=String(b%60);return 1==c.length&&(c="0"+c),1==d.length&&(d="0"+d),a.getTimezoneOffset()<0?"+"+c+d:"-"+c+d}},Log4js.FifoBuffer=function(){this.array=[]},Log4js.FifoBuffer.prototype={push:function(a){return this.array[this.array.length]=a,this.array.length},pull:function(){if(this.array.length>0){for(var a=this.array[0],b=0;b<this.array.length-1;b++)this.array[b]=this.array[b+1];return this.array.length=this.array.length-1,a}return null},length:function(){return this.array.length}};